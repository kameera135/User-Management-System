<!-- ==============New================== -->

<!-- <div class="row align-items-center" *ngIf="loadingInProgress">
  <app-waiting-circle></app-waiting-circle>
</div> -->

<!-- <div class="row mb-4 mx-1  {{ loadingInProgress ? 'hidden' : '' }}"> -->
<div class="row mb-4 mx-1">
  <div class="card">
    <div class="card-body pb-3">
      <div class="row">
        <div class="card-body">
          <div class="row align-items-end">
            <div class="col-6 col-lg-2">
              <div class="mb-3">
                <label class="col-form-label">Year</label>
                <select
                  class="form-select"
                  aria-label="Year"
                  [(ngModel)]="selectedYear"
                  (change)="loadData()"
                >
                  <!-- <option selected value="">Select...</option> -->
                  <option *ngFor="let item of yearList" [value]="item.value">
                    {{ item.value }}
                  </option>
                </select>
              </div>
            </div>

            <div class="col-6 col-lg-2">
              <div class="mb-3">
                <label class="col-form-label">Month</label>
                <select
                  class="form-select"
                  aria-label="Month"
                  [(ngModel)]="selectedMonth"
                  (change)="loadData()"
                >
                  <!-- <option selected value="">Select...</option> -->
                  <option *ngFor="let item of monthList" [value]="item.id">
                    {{ item.value }}
                  </option>
                </select>
              </div>
            </div>

            <div class="col-12 col-lg-3">
              <div class="mb-3">
                <label for="unitName" class="col-form-label">Unit</label>
                <div class="row">
                  <div class="col-9 col-lg-9">
                    <input
                      id="unitName"
                      type="text"
                      class="form-control"
                      disabled
                      value="{{ unitName }}"
                    />
                  </div>
                  <div
                    class="col-3 col-lg-3 d-flex justify-content-end justify-content-lg-start"
                  >
                    <app-right-tree-node
                      *ngIf="!loadingInProgress"
                      ButtonName="Units"
                      ButtonColor="btn-dark"
                      ButtonIcon="bi-box-fill"
                      (UnitSelectionChanged)="getSelectedUnitFromTree($event)"
                      [selectedUnitId]="this.unitId"
                    >
                    </app-right-tree-node>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-6 col-lg-3">
              <div class="mb-3">
                <label class="col-form-label">Meter</label>
                <select
                  class="form-select"
                  aria-label="Service"
                  [(ngModel)]="selectedMeter"
                  (change)="loadData()"
                  [disabled]="!unitId"
                >
                  <option selected value="">Select...</option>
                  <option
                    *ngFor="let item of meterCodeList"
                    [value]="item.meterId"
                  >
                    {{ item.meterName }}
                  </option>
                </select>
              </div>
            </div>

            <div class="col-6 col-lg-2">
              <div class="mb-3">
                <label for="nameInput" class="form-label">Service</label>
                <input
                  id="nameInput"
                  type="text"
                  class="form-control"
                  disabled
                  value="{{ service }}"
                />
              </div>
            </div>

            <!-- <div class="col-6 col-lg-3">
              <div class="mb-3">
                <label class="col-form-label">Tenant</label>
                <select class="form-select" aria-label="Tenant" [(ngModel)]="selectedTenant" (change)="loadData()">
                  <option selected value="">Select...</option>
                  <option *ngFor="let item of tenantList" [value]="item.id">{{item.value}}</option>
                </select>
              </div>
            </div> -->
          </div>
        </div>
      </div>
      <app-table
        *ngIf="!loadingInProgress"
        [headArray]="headArray"
        [dataArray]="dataArray"
        [dataTableOptions]="consumptionTableOptions"
        [displayPagination]="false"
        (onReportGenerateClick)="downloadExcel()"
      ></app-table>
    </div>
  </div>
</div>

<!-- ==============New================== -->

<!-- <div class="row mt-3 px-lg-5"> -->

<!-- <div class="col-12 col-lg-4 mb-3">
    <div class="border border-0 border-dark-subtle px-3 rounded" style="height: 485px; overflow-y: scroll;">
      <app-treeview-checkbox [selectParentNodes]="true" [checkboxesOnLeafNodes]="false"
        [treeDataSource]="asseteTreeData"
        (onAsseteTreeItemSelected)="onAsseteTreeChanged($event)"  ></app-treeview-checkbox>
    </div>
  </div>

  <div class="col-lg-1">

  </div> -->

<!-- <div class="col-12 col-lg-7 mx-auto">

    <div>

      <div class="row mb-3 align-items-baseline">
        <div class="col-3">
          <label for="nameInput" class="form-label">Unit Name</label>
        </div>
        <div class="col-9 ">
          <div class="row">
            <div class="col-12 col-md-9">
              <input type="text" class="form-control" disabled value="{{ unitName }}">
            </div>
            <div class="col-12 col-md-3 d-flex justify-content-end align-items-center mt-2 mt-md-0">
              <app-right-tree-node ButtonName="Units" ButtonColor="btn-dark"
                ButtonIcon="bi-box-fill"></app-right-tree-node>
            </div>
          </div>
        </div>
      </div>

      <div class="row mb-3 align-items-baseline">
        <div class="col-3">
          <label for="nameInput" class="form-label">Tenant</label>
        </div>
        <div class="col-9">
          <input type="text" class="form-control" disabled value="{{ tenantName }}">
        </div>
      </div>

      <div class="row mb-3 align-items-baseline">
        <div class="col-3">
          <label for="nameInput" class="form-label">Unit Code</label>
        </div>
        <div class="col-9">
          <input type="text" class="form-control" disabled value="{{ unitCode }}">
        </div>
      </div>



      <div class="row mb-3 align-items-baseline">
        <div class="col-3">
          <label class="form-label">Meter Code</label>
        </div>
        <div class="col-9">
          <select class="form-select" aria-label="Meter Code" [(ngModel)]="selectedMeterCode">
            <option selected value="">Select...</option>
            <option *ngFor="let item of meterCodeList" [value]="item.id">{{item.value}}</option>
          </select>
        </div>
      </div>

      <div class="row mb-3 align-items-baseline">
        <div class="col-3">
          <label for="nameInput" class="form-label">Service</label>
        </div>
        <div class="col-9">
          <input type="text" class="form-control" disabled value="{{ service }}">
        </div>
      </div>

      <div class="row mb-3 align-items-baseline">
        <div class="col-3">
          <label class="form-label">Year</label>
        </div>
        <div class="col-9">
          <select class="form-select" aria-label="Year" [(ngModel)]="selectedYear">
            <option selected value="">Select...</option>
            <option *ngFor="let item of yearList" [value]="item.id">{{item.value}}</option>
          </select>
        </div>
      </div>

      <div class="row mb-3 align-items-baseline">
        <div class="col-3">
          <label class="form-label">Month</label>
        </div>
        <div class="col-9">
          <select class="form-select" aria-label="Month" [(ngModel)]="selectedMonth">
            <option selected value="">Select...</option>
            <option *ngFor="let item of monthList" [value]="item.id">{{item.value}}</option>
          </select>
        </div>
      </div>


    </div>

    <div class="col-12 d-flex justify-content-end">
      <div class="mb-3">
        <button type="button" class="btn btn-success btn-label me-3">
          <i class="bi bi-eye label-icon align-middle fs-16 me-2"></i> View</button>
      </div>

      <div class="mb-3">
        <button type="button" class="btn btn-primary btn-label">
          <i class="bi bi-download label-icon align-middle fs-16 me-2"></i> Download</button>
      </div>
    </div>

  </div>

</div> -->
